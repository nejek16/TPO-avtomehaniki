<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mehanik - Zaloga</title>
    <!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
	<link rel="stylesheet" type="text/css" href="css/index.css">
	<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
	
		<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="./contents/bootstrap/css/bootstrap.min.css" />
	<link rel="stylesheet" href="css/datatable.css"/>

	<!-- Bootstrap Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	
	<script>require('popper.js');</script>
	<script>require('bootstrap');</script>
	<script>let $ = require('jquery');</script>
	<script>require( 'datatables.net' )( window, $ );</script>
	<script>require( 'datatables.net-bs' )( window, $ );</script>
	<script>require( 'datatables.net-jqui' )( window, $ );</script>

	<script src="js/mainScript.js"></script>

</head>

<body onload="getZalogaFix();">
	<div class="container">
		<!-- Modal -->
		<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
			aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="exampleModalLabel">Prevzemi artikel</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<p id="enterTextModal">Vnesi željeno količino</p>
						<input id="prevzemiZalogo"  type="number" class="form-control" min="0">
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss="modal">Prekliči</button>
						<button id="btn-DodajZalogo" type="button" class="btn btn-success" onclick="prevzemZalogePotrdi();">Prevzemi</button>
					</div>
				</div>
			</div>
		</div>

	</div>
	<div class="container p-3">
		<div class="row">
			<div id = narocila class="col-sm-4 text-left">
				<button id="narocila" type="submit" class="btn btn-outline-primary">NAROČILA</button>
			</div>
			<div id = zaloga class="col-sm-4 text-center align-middle">
				<h1 class="text-center">Zaloga</h1>
			</div>
			<div id = izpis class="col-sm-4 text-right align-middle">
				<button id="odjava" type="submit" class="btn btn-outline-primary text-center">ODJAVA</button>
			</div>
		</div>
		<div style="margin-bottom: 60px;"></div>
		<div class="row">
		 <!-- Grid -->
		 <div class="col-sm-12" style="padding-left: 0px; padding-right: 0px;">
				<div class="container wrapper">
					<table class="table table-bordered table-hover" cellspacing="0" width="100%">
						<thead>
							<tr>
								<th class="col-md-2">Ime artikla</th>
								<th class="col-md-2">Številka artikla</th>
								<th class="col-md-2">Količina</th>
								<th class="col-md-2"></th>
							</tr>
						</thead>
						<tfoot>
						</tfoot>
						<tbody>
						<!-- inserts here -->
						</tbody>
					</table>
				  </div>
			</div>
		</div>
	</div>
</body>
<script>
//Odjava
$('#odjava').click(function(){
        const ipcRenderer = require('electron').ipcRenderer;
        ipcRenderer.send('changeWindow', 'index.html')
	});
//naročila
$('#narocila').click(function(){
        const ipcRenderer = require('electron').ipcRenderer;
        ipcRenderer.send('changeWindow', 'mehanikNarocila.html')
    });

function completeGrid(){
        $('.table').DataTable({
      //disable sorting on last column

      "columnDefs": [
        { "orderable": false, "targets": 3 }
      ],
      "lengthChange": false,
      "bPaginate": false
    })  
}

$(document).on('keyup', 'input[id=prevzemiZalogo]', function () {
    var _this = $(this);
    var min = parseInt(_this.attr('min')); // if min attribute is not defined, 1 is default
    var max = parseInt(_this.attr('max')); // if max attribute is not defined, 100 is default
    var val = parseInt(_this.val()) || (min - 1); // if input char is not a number the value will be (min - 1) so first condition will be true
    if(val < min)
        _this.val( min );
    if(val > max)
        _this.val( max );
});
completeGrid()
</script>
</html> 